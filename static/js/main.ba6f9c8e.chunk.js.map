{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","utils/Api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","item","cardLikeButtonClassName","src","link","alt","name","onClick","onCardClick","type","onCardDelete","onCardLike","length","Main","cards","onEditAvatar","onAddPlace","onEditProfile","handleCardDelete","handleCardLike","avatar","about","map","Footer","PopupWithForm","isOpen","noValidate","onSubmit","onClose","title","children","value","textOnButton","ImagePopup","AddPlacePopup","useState","setName","setLink","e","preventDefault","id","placeholder","minLength","maxLength","required","onChange","target","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","EditProfilePopup","description","setDescription","useEffect","onUpdateUser","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_handleResponse","userData","body","JSON","stringify","data","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCards","setCurrentUser","closeAllPopups","getInitialCards","catch","err","console","log","getUserInfo","Provider","i","changeLikeCardStatus","newCard","state","c","delete","filter","cardData","addUserCard","handleUserAvatar","setUserInfoApi","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ba6f9c8e.chunk.js","sourcesContent":["function Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__logo\"></div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header","import React from 'react'\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext)\r\n\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = props.card.owner._id === currentUser._id\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n  const cardDeleteButtonClassName = (\r\n    `element__delete-button ${isOwn ? '' : 'element__delete-button_type_hidden'}`\r\n  )\r\n\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = props.card.likes.some((item) => item._id === currentUser._id)\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n  const cardLikeButtonClassName = (\r\n    `element__button ${isLiked ? 'element__button_active' : ''}`\r\n  )\r\n\r\n  function handleCardClick() {\r\n    props.onCardClick(props.card)\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    props.onCardDelete(props.card)\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card)\r\n  }\r\n\r\n  return(\r\n    <div className=\"element\">\r\n      <img src={props.card.link} alt={props.card.name} className=\"element__image\" onClick={handleCardClick} />\r\n      <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n      <div className=\"element__container\">\r\n        <p className=\"element__title\">{props.card.name}</p>\r\n        <div className=\"element__like-container\">\r\n          <button type=\"button\" className = {cardLikeButtonClassName} onClick={handleLikeClick}></button>\r\n          <span className=\"element__like-number\">{props.card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Card","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\nimport Card from \"./Card.js\";\r\n\r\nfunction Main({cards, onEditAvatar, onAddPlace, onEditProfile, onCardClick, handleCardDelete, handleCardLike}) {\r\n  const currentUser = React.useContext(CurrentUserContext)\r\n\r\n  return(\r\n    <main>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__container-info\">\r\n          <img src={currentUser.avatar} alt=\"Аватар профиля\" className=\"profile__avatar\" />\r\n          <button type=\"button\" className=\"profile__avatar-button\" onClick={onEditAvatar}></button>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__title\">\r\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n              <button type=\"button\" className=\"profile__edit-button\" onClick={onEditProfile}></button>\r\n            </div>\r\n            <p className=\"profile__description\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add-button\" onClick={onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"elements\">\r\n      {cards.map((card) => <Card key={card._id} onCardClick={onCardClick} onCardDelete={handleCardDelete} onCardLike={handleCardLike} card={card} />)}\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Main","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer","function PopupWithForm(props) {\r\n  return (\r\n    <div className={`popup ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <form name={props.name} className=\"popup__container\" noValidate onSubmit={props.onSubmit}>\r\n        <button type=\"button\" className=\"popup__close-button popup__close-button_edit-profile\" onClick={props.onClose}></button>\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        {props.children}\r\n        <button type=\"submit\" className=\"popup__save-button\" value=\"Сохранить\">{props.textOnButton}</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm","function ImagePopup(props) {\r\n  return (\r\n    <div className={`popup ${props.card ? 'popup_opened' : ''}`}>\r\n      <figure className=\"popup__figure\">\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n        <img className=\"popup__image\" src={props.card ? props.card.link : '#'} alt={props.card ? props.card.name : ''} />\r\n        <figcaption className=\"popup__caption\">{props.card ? props.card.name : ''}</figcaption>\r\n      </figure>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImagePopup","import React from 'react'\r\nimport PopupWithForm from './PopupWithForm.js'\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = React.useState('')\r\n  const [link, setLink] = React.useState('')\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  function handleLinkChange(e) {\r\n    setLink(e.target.value)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    props.onAddPlace({\r\n      name: name,\r\n      link: link\r\n    })\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={'element_add'}\r\n      title={'Новое место'}\r\n      textOnButton={'Создать'}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input id=\"title\" name=\"name\" type=\"text\" className=\"popup__info popup__info_type_title\" placeholder=\"Название\" minLength=\"2\" maxLength=\"30\" required onChange={handleNameChange}/>\r\n      <span id=\"title-error\" className=\"popup__input-error popupTitle-input-error\"></span>\r\n      <input id=\"link\" name=\"link\" type=\"url\" className=\"popup__info popup__info_type_link\" placeholder=\"Ссылка на картинку\" required onChange={handleLinkChange}/>\r\n      <span id=\"link-error\" className=\"popup__input-error popupLink-input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup","import React from 'react'\r\nimport PopupWithForm from './PopupWithForm.js'\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = React.useRef('')\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value\r\n    })\r\n    avatarRef.current.value = ''\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={'edit-avatar'}\r\n      title={'Обновить аватар'}\r\n      textOnButton={'Сохранить'}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input id=\"url\" name=\"avatar\" type=\"url\" className=\"popup__info popup__info_type_link\" placeholder=\"Ссылка на картинку\" required ref={avatarRef}/>\r\n      <span id=\"url-error\" className=\"popup__input-error popupLink-input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup","import React from 'react'\r\nimport PopupWithForm from './PopupWithForm.js'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\r\n\r\nfunction EditProfilePopup(props) {\r\n  // Подписка на контекст\r\n  const currentUser = React.useContext(CurrentUserContext)\r\n\r\n  const [name, setName] = React.useState('')\r\n  const [description, setDescription] = React.useState('')\r\n\r\n  // После загрузки текущего пользователя из API\r\n  // его данные будут использованы в управляемых компонентах.\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, props.isOpen]);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Запрет браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n  \r\n    // Передача значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  } \r\n\r\n  return (\r\n    <PopupWithForm \r\n      name={'edit-profile'}\r\n      title={'Редактировать профиль'}\r\n      textOnButton={'Сохранить'}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input value={name || ''} id=\"username\" name=\"name\" type=\"text\" className=\"popup__info popup__info_type_name\" placeholder=\"Имя\" minLength=\"2\" maxLength=\"40\" required onChange={handleNameChange} />\r\n      <span id=\"username-error\" className=\"popup__input-error popupName-input-error\"></span>\r\n      <input value={description || ''} id=\"about\" name=\"about\" type=\"text\" className=\"popup__info popup__info_type_description\" placeholder=\"О себе\" minLength=\"2\" maxLength=\"200\" required onChange={handleDescriptionChange} />\r\n      <span id=\"about-error\" className=\"popup__input-error popupDescription-input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\nexport default EditProfilePopup","class Api {\r\n  constructor(options) {\r\n    this._url = options.url\r\n    this._headers = options.headers\r\n  }\r\n\r\n  _handleResponse(res) {\r\n    if (res.ok) {\r\n      return res.json()\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`)\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(this._url + '/users/me', {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(this._url + '/cards', {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  setUserInfoApi(userData) {\r\n    return fetch(this._url + '/users/me', {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: userData.name,\r\n        about: userData.about\r\n      })\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  handleUserAvatar(data) {\r\n    return fetch(this._url + `/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: data.avatar,\r\n      })\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  addUserCard(data) {\r\n    return fetch(this._url + '/cards', {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link\r\n      })\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  delete(id) {\r\n    return fetch(this._url + `/cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  changeLikeCardStatus(id, isLiked) {\r\n    return fetch(this._url + `/cards/likes/${id}`, {\r\n      method: `${isLiked ? 'PUT' : 'DELETE'}`,\r\n      headers: this._headers\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-26',\r\n  headers: {\r\n    \"authorization\": '442d7c15-d132-449b-929f-8694ae0bf753',\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\nexport default api","import Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport api from '../utils/Api.js';\nimport React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false)\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false)\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false)\n  const [selectedCard, setSelectedCard] = React.useState(null)\n  const [cards, setCards] = React.useState([])\n  const [currentUser, setCurrentUser] = React.useState({})\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n\n  function onCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false)\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setSelectedCard(null)\n  }\n\n  function onUpdateUser(userData) {\n    api.setUserInfoApi(userData)\n      .then((data) => {\n        setCurrentUser(data)\n        closeAllPopups()\n      })\n      .catch((err) => console.log(err))\n  }\n\n  function onUpdateAvatar(userData) {\n    api.handleUserAvatar(userData)\n      .then((data) => {\n        setCurrentUser(data)\n        closeAllPopups()\n      })\n      .catch((err) => console.log(err))\n  }\n\n  function handleCardLike(card) {\n    // Проверка, есть ли лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id)\n    \n    // Отправка запроса в API и получение обновлённых данных карточки\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c))\n      })\n      .catch((err) => console.log(err))\n  }\n\n  function handleCardDelete(card) {\n    api.delete(card._id)\n      .then(() => {\n        setCards(cards.filter((i) => i !== card))\n      })\n      .catch((err) => console.log(err))\n  }\n\n  function handleAddPlaceSubmit(cardData) {\n    api.addUserCard(cardData)\n      .then((newCard) => {\n        setCards([newCard, ...cards])\n        closeAllPopups()\n      })\n      .catch((err) => console.log(err))\n  }\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then((data) => {\n        setCards(data)\n      })\n      .catch((err) => console.log(err))\n  }, [])\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then((data) => {\n        setCurrentUser(data)\n      })\n      .catch((err) => console.log(err))\n  }, [])\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <div className=\"page\">\n          <Header />\n\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={onCardClick}\n            cards={cards}\n            currentUser={currentUser}\n            handleCardLike={handleCardLike}\n            handleCardDelete={handleCardDelete}\n          />\n          \n          <Footer />\n\n          <PopupWithForm\n            name={'verify-delete'}\n            title={'Вы уверены?'}\n            textOnButton={'Да'}\n          />\n\n          <ImagePopup\n            card={selectedCard}\n            onClose={closeAllPopups}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n        \n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={onUpdateAvatar}\n          />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={onUpdateUser}\n          />\n\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}